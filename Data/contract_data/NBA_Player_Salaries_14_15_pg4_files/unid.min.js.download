!function(s,e,o,l){if(void 0===s.unid||!s.unid.version){!function(){try{new window.CustomEvent("test")}catch(e){var t=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i};t.prototype=window.Event.prototype,window.CustomEvent=t}}();var c="com.go.unid",v=function(e){return(document.cookie.match("(?:^|;\\s*)"+e+"\\s*=\\s*([^;]+)")||0)[1]},g=function(e,t,i,n){var a=new Date;a.setTime(a.getTime()+15768e7),document.cookie=e+"="+(void 0===t?"":t)+";path="+(n||"/")+";expires="+(void 0===t?"Thu, 01 Jan 1970 00:00:01 GMT":a.toUTCString())+(i?";domain="+i:"")},r=function(){w.className="",h.postMessage(JSON.stringify({action:"check",data:unid._data}),D)},u=function(e){b.vexpired=63072e6<=new Date-e,b.vexpired&&(delete b.lsData.VCONSENT,delete b.lsData.VCONSENTTIME,delete b.lsData.SWID,delete b.lsData.ANON)},f=function(e,t){unid.reason=e,o.dispatchEvent(new CustomEvent("unid.error",{detail:t||e})),s.unid.cbGet&&s.unid.cbGet(),s.unid.cbData&&s.unid.cbData(unid.getData())},m=function(){var e=unid.getData();if(o.dispatchEvent(new CustomEvent("unid.value",{detail:e})),s.unid.cbGet&&s.unid.cbGet(e.unid),s.unid.cbData&&s.unid.cbData(e),!unid._data.uiLogSent&&"{}"!==JSON.stringify(unid._data.uiLog)){unid._data.uiLogSent=1;var t=new(s.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");t.open("POST",s.location.protocol+"//unid.go.com/log",!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),unid._data.uiLog.conversation_id=unid._data.conversation_id,unid._data.uiLog.correlation_id=unid._data.correlation_id,unid._data.uiLog.h=unid._data.host,unid._data.uiLog.href=unid._data.href,unid._data.uiLog.framed=unid._data.framed,unid._data.lsDisabled||(unid._data.uiLog.ls=localStorage.getItem(c+":data")),unid._data.uiLog.lsDisabled=unid._data.lsDisabled?1:0,unid._data.uiLog.lsFail=unid._data.lsFail?1:0,unid._data.uiLog.new=unid.new,unid._data.uiLog.received=unid.received,unid._data.uiLog.silo=unid.silo,unid._data.uiLog.swid=unid._data.swid,unid._data.uiLog.version=unid.version,t.send(JSON.stringify(unid._data.uiLog))}},p=function(e,t){var i=(new Date).getTime();if(o.dispatchEvent(new CustomEvent("unid.abort",{detail:unid.getData()})),m(),"denied"!==e&&"swid_nt"!==e&&!(localStorage&&72e6<i-Number(localStorage.getItem(c+":abort")||0)))try{localStorage.setItem(c+":abort",i);var n=new(s.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");n.open("GET",s.location.protocol+"//unid.go.com/abort",!0),n.setRequestHeader("Content-Type","text/plain"),n.setRequestHeader("_","f`"+(parent!==s?1:0)+"``h`"+s.location.hostname+(t?"``e`"+t:"")+"``"+e+"`1"),n.send()}catch(e){}},_=function(e){if(!b.lsDisabled)try{localStorage.setItem(c+":data",JSON.stringify(e))}catch(e){b.lsFail=!0}},t=v("UNID"),i=v("SWID"),D=l.protocol+"//cdn.unid.go.com",n=l.hostname.replace(/\.$/,"").toLowerCase(),b={cookiesDisabled:!e.cookieEnabled,framed:s.self!=s.top||l!==s.parent.location?1:0,fwid:v("mrmid"),host:n,href:l.href,incognito:!1,language:e.language,uiLog:{},lsDisabled:!1,lsFail:!1,merlinId:"undefined"!=typeof Merlin&&Merlin.cookies?Merlin.cookies.M_ID:void 0,ref:o.referrer,rutma:v("__rutma"),swid:i,tzOffset:(new Date).getTimezoneOffset(),unid:t,what:{}};if(void 0!==s.DisneyID){b.did=1;try{s.DisneyID.getLoggedInStatus().then(function(e){e&&s.DisneyID.get().getGuest().then(function(e){e.profile&&(b.authed=1,b.test="Y"===e.profile.testProfileFlag)}).fail(function(e){b.didErrorGuest=1,b.didErrorMsg=e})})}catch(e){b.didErrorLoad=1,b.didErrorMsg=e.message}}if(s.unid={_data:b,clear:function(e){e&&(s.unid.clearCB=e),g("UNID");for(var t=l.host.split(":")[0].split("."),i="."+t.pop(),n=0;n<t.length;n++)i=t.pop()+i,t.length&&(i="."+i),g("UNID",void 0,i),v("UNID")||(t=[]);localStorage.removeItem(c+":abort"),localStorage.removeItem(c+":data"),delete unid._data.unid,delete unid.value,unid.new=!1,unid.silo=!1,unid._data.lsData={},unid.reason="cleared",h&&h.postMessage('{"action":"clear"}',D)},get:function(e){var t=v("UNID");return e&&(t?e(t):s.unid.cbGet=e),t},getData:function(e){var t={new:s.unid.new,reason:s.unid.reason,received:s.unid.received,silo:s.unid.silo,unid:"denied"===s.unid.reason?void 0:s.unid.value,done:s.unid.done};return e&&(t.done?e(t):s.unid.cbData=e),t},vconsent:function(e,t,i,n){var a=void 0===unid._data.lsData.VCONSENT?2:unid._data.lsData.VCONSENT;u(t);var d=b.vexpired?2:e?1:0;return a===d?(n&&n({unid:unid.value,reason:unid.reason,type:unid.type}),!1):(2!==d&&(1===d&&(unid.silo=!1),unid._data.lsData.VCONSENT=d,unid._data.lsData.VCONSENTTIME=t.getTime()),unid._data.user=i,unid._data.update=1,2===a&&0===d||0===a&&2===d||(unid._data.unid=void 0,delete unid._data.lsData.UNID),_(unid._data.lsData),r(),n&&(s.unid.cbData=n),!0)},new:!1,reason:t?"return":"new",received:!1,silo:!1,value:t,version:"4.0.96",done:!1},b.version=s.unid.version,"1"==v("SWID_NT"))return unid.clear(),unid.reason="swid_nt",unid.done=!0,p("swid_nt");b.cookiesDisabled||(g(c,c),b.cookiesBlocked=!v(c),g(c));try{var a=c+":test";localStorage.setItem(a,1),localStorage.getItem(a),localStorage.removeItem(a)}catch(e){b.lsDisabled=!0}var d=function(){var e;if(b.lsDisabled||(e=localStorage.getItem(c+":data")),"[object Object]"===e&&(localStorage.removeItem(c+":data"),e=void 0),e)try{e=JSON.parse(e)}catch(e){localStorage.removeItem(c+":data"),b.lsFail=!0}return e||{}}();void 0!==(b.lsData=d).VCONSENTTIME&&u(d.VCONSENTTIME);var w=o.createElement("iframe");w.id="unidFrame",w.style.display="none",w.src=D+"/inner/?v="+s.unid.version;var h,S=function(){o.body.appendChild(w),h=w.contentWindow};o.body&&S(),o.onreadystatechange=function(){if("complete"===o.readyState&&o.body&&(!b.merlinId&&"undefined"!=typeof Merlin&&Merlin.getCookies&&Merlin.getCookies(function(e){e&&e.M_ID&&(b.merlinId=e.M_ID)}),h||S(),"MutationObserver"in s)){var d=new MutationObserver(function(e){e.forEach(function(e){var t,i=e.addedNodes[0];if(i&&((t=i.childNodes)[0]&&Array.prototype.slice.call(t).filter(function(e){return!!e.id&&"unidFrame"==e.id}).length)){d.disconnect();var n=o.querySelector("#unidFrame"),a=w&&w.parentNode?w.parentNode:null;a&&(a.removeChild(n),S())}else s.setTimeout(function(){d.disconnect()},2e3)})});d.observe(o.body,{childList:!0,subtree:!1,attributes:!1})}};var N=o.querySelector('script[src*="/js/unid.min.js"]');N?(b.client=N.getAttribute("data-client"),b.correlation_id=N.getAttribute("data-correlation_id"),b.conversation_id=N.getAttribute("data-conversation_id"),b.vrequired=!!N.getAttribute("data-vrequired")):b.uiLog.qs_fail=1,o.dispatchEvent(new CustomEvent("unid.ready")),w.onload=function(){!function(t){try{var e=window.RequestFileSystem||window.webkitRequestFileSystem;if(e)e(window.TEMPORARY,100,function(){t()},function(){b.incognito=!0,t()});else{if(!window.indexedDB)throw 1;sessionStorage.setItem(c,c),sessionStorage.removeItem(c),t()}}catch(e){b.incognito=!0,t()}}(r)};var I=function(e){if(e.origin===D){var t={};try{t=JSON.parse(e.data)}catch(e){return}var i,n=t.data,a=t.action;if("state"===a){if(w.classList.add("unid_"+n),"cleared"===n&&s.unid.clearCB)return s.unid.clearCB();if("done"===n)return unid.done=!0,m();if("swid_nt"===n)return unid.clear(),unid.reason=n,p(n);if("daa_optout"===n)return unid.clear(),unid.reason=n,p(n);if("denied"===n||"gated"===n){var d=v("UNID");return d&&(b.uiLog.unid=d,b.uiLog.reason=n),g("UNID"),delete unid._data.unid,delete unid.value,unid.new=!1,unid.silo=!1,unid.reason=n,p(n)}if("backoff"===n)return f(n);if(/error_/.test(n))return f("error",Number(n.replace("error_","")));"debug"===n&&((i=new(s.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0")).open("POST",s.location.protocol+"//unid.go.com/debug",!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify({ls:localStorage.getItem(c+":data"),href:l.href,h:l.hostname,u:unid.value,s:v("SWID"),unid_cookie:v("UNID"),debug:JSON.stringify(unid.getData())})))}else if("store"===a)unid._data.lsData=n,unid._data.lsData.version=unid.version,_(n);else if("log"===a)console.log(n);else if("reason"===a)"new"===(unid.reason=n)?unid.new=!0:"silo"===n?unid.silo=!0:"sync"===n&&(unid.new=!1,unid.silo=!1);else if("unid"===a){if(unid.received=!0,n){for(var o=l.host.split(":")[0].split("."),r="."+o.pop(),u=0;u<o.length;u++)r=o.pop()+r,o.length&&(r="."+r),g("UNID",n,r),v("UNID")===n&&(o=[]);g("UNID",n),w.classList.add("unid_allowed"),w.setAttribute("data-unid",n)}unid.new="sync"!==unid.reason&&n&&n!==s.unid.value,s.unid.value=n,s.unid._data&&(s.unid._data.unid=s.unid.value)}}};s.addEventListener?addEventListener("message",I,!1):attachEvent("onmessage",I)}}(window,navigator,document,window.location);
